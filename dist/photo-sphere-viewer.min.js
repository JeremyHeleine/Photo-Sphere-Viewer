var PhotoSphereViewer=function(a){var b=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},c=function(){var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl"))},d=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},e=function(a,b,c){return Math.max(b,Math.min(c,a))},f=function(a,b,c,d){var e=c-a,f=d-b;return e*e+f*f},g=function(a,b){return b=void 0!==b?!!b:!1,b&&a==2*Math.PI?2*Math.PI:a-2*Math.floor(a/(2*Math.PI))*Math.PI};this.load=function(){if(xa.innerHTML="",Ya&&1===Ya.nodeType)xa.appendChild(Ya);else if(Ya&&"string"==typeof Ya)xa.innerHTML=Ya;else if(Xa){var a=document.createElement("img");a.setAttribute("src",Xa),a.setAttribute("alt",Wa),xa.appendChild(a)}else xa.textContent=Wa;return Aa=document.createElement("div"),Aa.style.width="100%",Aa.style.height="100%",Aa.style.position="relative",Aa.style.overflow="hidden",b()?void 0===window.THREE?void console.log("PhotoSphereViewer: Three.js is not loaded."):(ua={width:0,height:0,ratio:0},void(Qa&&!Ca.match(/^data:image\/[a-z]+;base64/)?j():k())):void(xa.textContent="Canvas is not supported, update your browser!")};var h=function(a){for(var b=0,c=0,d="";-1!=(b=a.indexOf("<x:xmpmeta",c))&&-1!=(c=a.indexOf("</x:xmpmeta>",b));)if(d=a.substring(b,c),-1!=d.indexOf("GPano:"))return d;return""},i=function(a,b){var c=a.indexOf("GPano:"+b)+b.length+8,d=a.indexOf('"',c);return a.substring(c,d)},j=function(){var a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest;else{if(!window.ActiveXObject)return void(xa.textContent="XHR is not supported, update your browser!");try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var b=h(a.responseText);if(!b.length)return void k();Sa={full_width:parseInt(i(b,"FullPanoWidthPixels")),full_height:parseInt(i(b,"FullPanoHeightPixels")),cropped_width:parseInt(i(b,"CroppedAreaImageWidthPixels")),cropped_height:parseInt(i(b,"CroppedAreaImageHeightPixels")),cropped_x:parseInt(i(b,"CroppedAreaLeftPixels")),cropped_y:parseInt(i(b,"CroppedAreaTopPixels"))},Va=!0,k()}},a.open("GET",Ca,!0),a.send(null)},k=function(){var a=new Image;a.onload=function(){var b={full_width:a.width,full_height:a.height,cropped_width:a.width,cropped_height:a.height,cropped_x:null,cropped_y:null};if(360!=Ua.horizontal_fov||180!=Ua.vertical_fov){if(Sa.cropped_width=b.cropped_width,Sa.cropped_height=b.cropped_height,Sa.full_width=b.full_width,Sa.full_height=b.full_height,360!=Ua.horizontal_fov){var d=Ua.horizontal_fov/360;Sa.full_width=Sa.cropped_width/d}if(180!=Ua.vertical_fov){var e=Ua.vertical_fov/180;Sa.full_height=Sa.cropped_height/e}}else{for(var f in Sa)null===Sa[f]&&void 0!==b[f]&&(Sa[f]=b[f]);if(Va){if(Sa.cropped_width!=b.cropped_width){var g=b.cropped_width/Sa.cropped_width;Sa.cropped_width=b.cropped_width,Sa.full_width*=g,Sa.cropped_x*=g}if(Sa.cropped_height!=b.cropped_height){var h=b.cropped_height/Sa.cropped_height;Sa.cropped_height=b.cropped_height,Sa.full_height*=h,Sa.cropped_y*=h}}}null===Sa.cropped_x&&(Sa.cropped_x=(Sa.full_width-Sa.cropped_width)/2),null===Sa.cropped_y&&(Sa.cropped_y=(Sa.full_height-Sa.cropped_height)/2);var i=2048;if(c()){var j=document.createElement("canvas"),k=j.getContext("webgl");i=k.getParameter(k.MAX_TEXTURE_SIZE)}var m=Math.min(Sa.full_width,i),n=m/Sa.full_width;Sa.full_width=m,Sa.cropped_width*=n,Sa.cropped_x*=n,a.width=Sa.cropped_width,Sa.full_height*=n,Sa.cropped_height*=n,Sa.cropped_y*=n,a.height=Sa.cropped_height;var o=document.createElement("canvas");o.width=Sa.full_width,o.height=Sa.full_height;var p=o.getContext("2d");p.drawImage(a,Sa.cropped_x,Sa.cropped_y,Sa.cropped_width,Sa.cropped_height),l(o.toDataURL("image/jpeg"))},Ra&&!Ca.match(/^data:image\/[a-z]+;base64/)&&a.setAttribute("crossOrigin","anonymous"),a.src=Ca},l=function(a){var b=new THREE.Texture,c=new THREE.ImageLoader,d=function(a){b.needsUpdate=!0,b.image=a,m(b)};c.load(a,d)},m=function(a){void 0!==ya.width&&(xa.style.width=ya.width.css),void 0!==ya.height&&(xa.style.height=ya.height.css),u(),Da=c()?new THREE.WebGLRenderer:new THREE.CanvasRenderer,Da.setSize(ua.width,ua.height),Ea=new THREE.Scene,Fa=new THREE.PerspectiveCamera(X,ua.ratio,1,300),Fa.position.set(0,0,0),Ea.add(Fa);var b=new THREE.SphereGeometry(200,32,32),e=new THREE.MeshBasicMaterial({map:a,overdraw:!0}),f=new THREE.Mesh(b,e);if(f.scale.x=-1,Ea.add(f),Ba=document.createElement("div"),Ba.style.position="absolute",Ba.style.zIndex=0,Aa.appendChild(Ba),ra&&(qa.setStyle(sa),qa.create(),Aa.appendChild(qa.getBar())),null!==Za){var g=document.createElement("img");g.onload=function(){g.style.display="block",g.style.position="absolute",g.style[Za.position.x]="5px",g.style[Za.position.y]="5px","bottom"==Za.position.y&&ra&&(g.style.bottom=qa.getBar().offsetHeight+5+"px"),void 0!==Za.size&&(g.style.width=Za.size.width,g.style.height=Za.size.height),Aa.appendChild(g)},g.src=Za.image}d(window,"resize",u),ta&&(d(Ba,"mousedown",x),d(document,"mousemove",C),d(Ba,"mousemove",O),d(document,"mouseup",B),d(Ba,"touchstart",y),d(document,"touchend",B),d(document,"touchmove",D),va&&(d(Ba,"mousewheel",I),d(Ba,"DOMMouseScroll",I))),d(document,"fullscreenchange",L),d(document,"mozfullscreenchange",L),d(document,"webkitfullscreenchange",L),d(document,"MSFullscreenChange",L),Oa.addListener(H),xa.innerHTML="",xa.appendChild(Aa);var h=Da.domElement;h.style.display="block",Ba.appendChild(h),n(),ga>0&&J(ga),q(),S("ready")},n=function(){var a=new THREE.Vector3;a.setX(Math.cos(da)*Math.sin(ea)),a.setY(Math.sin(da)),a.setZ(Math.cos(da)*Math.cos(ea)),Fa.lookAt(a),null!==Ga?Ga.render(Ea,Fa):Da.render(Ea,Fa)},o=function(){Ga=new THREE.StereoEffect(Da),Ga.eyeSeparation=wa,Ga.setSize(ua.width,ua.height),F(),M(),qa.mustBeHidden(),n(),S("stereo-effect",!0)},p=function(){Ga=null,Da.setSize(ua.width,ua.height),qa.mustBeHidden(!1),n(),S("stereo-effect",!1)};this.toggleStereo=function(){null!==Ga?p():o()};var q=function(){ka!==!1&&(Na=setTimeout(s,ka))},r=function(){da-=(da-oa)*na,ea+=la;var a=!0;aa||(ea=e(ea,ba,ca),ea!=ba&&ea!=ca||(ma?la*=-1:(t(),a=!1))),ea=g(ea,!0),S("position-updated",{longitude:ea,latitude:da}),n(),a&&(Ma=setTimeout(r,ja))},s=function(){r(),S("autorotate",!0)},t=function(){clearTimeout(Na),Na=null,clearTimeout(Ma),Ma=null,S("autorotate",!1)};this.toggleAutorotate=function(){clearTimeout(Na),Ma?t():s()};var u=function(){xa.clientWidth==ua.width&&xa.clientHeight==ua.height||v({width:xa.clientWidth,height:xa.clientHeight})};this.fitToContainer=function(){u()};var v=function(a){ua.width=void 0!==a.width?parseInt(a.width):ua.width,ua.height=void 0!==a.height?parseInt(a.height):ua.height,ua.ratio=ua.width/ua.height,Fa&&(Fa.aspect=ua.ratio,Fa.updateProjectionMatrix()),Da&&(Da.setSize(ua.width,ua.height),n()),Ga&&(Ga.setSize(ua.width,ua.height),n())};this.getPosition=function(){return{longitude:ea,latitude:da}},this.getPositionInDegrees=function(){return{longitude:180*ea/Math.PI,latitude:180*da/Math.PI}};var w=function(a,b){var c=Q(a);aa||(c=e(c,ba,ca));var d=Q(b);d>Math.PI&&(d-=2*Math.PI),d=e(d,Z,Y),ea=c,da=d,S("position-updated",{longitude:ea,latitude:da}),n()};this.moveTo=function(a,b){w(a,b)};var x=function(a){z(parseInt(a.clientX),parseInt(a.clientY))},y=function(a){if(1==a.touches.length){var b=a.touches[0];b.target.parentNode==Ba&&z(parseInt(b.clientX),parseInt(b.clientY))}else 2==a.touches.length&&(B(),a.touches[0].target.parentNode==Ba&&a.touches[1].target.parentNode==Ba&&A(f(a.touches[0].clientX,a.touches[0].clientY,a.touches[1].clientX,a.touches[1].clientY)));O()},z=function(a,b){Ia=a,Ja=b,t(),Ha=!0},A=function(a){La=a,Ka=!0},B=function(a){Ha=!1,Ka=!1},C=function(a){a.preventDefault(),E(parseInt(a.clientX),parseInt(a.clientY))},D=function(a){if(1==a.touches.length&&Ha){var b=a.touches[0];b.target.parentNode==Ba&&(a.preventDefault(),E(parseInt(b.clientX),parseInt(b.clientY)))}else if(2==a.touches.length&&a.touches[0].target.parentNode==Ba&&a.touches[1].target.parentNode==Ba&&Ka){a.preventDefault();var c=f(a.touches[0].clientX,a.touches[0].clientY,a.touches[1].clientX,a.touches[1].clientY),d=c-La;if(0!==d){var e=d/Math.abs(d);J(ga+e),La=c}}},E=function(a,b){Ha&&(T?(ea+=(a-Ia)/ua.height*ha*Math.PI/180,da+=(b-Ja)/ua.height*ha*Math.PI/180):(ea+=(a-Ia)*U,da+=(b-Ja)*V),Ia=a,Ja=b,aa||(ea=e(ea,ba,ca)),ea=g(ea,!0),da=e(da,Z,Y),S("position-updated",{longitude:ea,latitude:da}),n())},F=function(){Oa.start(),t(),S("device-orientation",!0)},G=function(){Oa.stop(),S("device-orientation",!1)};this.toggleDeviceOrientation=function(){Oa.isEventAttached()?G():F()};var H=function(a){ea=e(a.longitude,ba,ca),da=e(a.latitude,Z,Y),S("position-updated",{longitude:ea,latitude:da}),n()},I=function(a){a.preventDefault(),a.stopPropagation();var b=a.detail?-a.detail:a.wheelDelta;if(0!==b){var c=parseInt(b/Math.abs(b));J(ga+c)}},J=function(a){ga=e(parseInt(Math.round(a)),0,100),ha=X+ga/100*(W-X),Fa.fov=ha,Fa.updateProjectionMatrix(),n(),S("zoom-updated",ga)};this.getZoomLevel=function(){return ga},this.zoom=function(a){J(a)},this.zoomIn=function(){100>ga&&J(ga+1)},this.zoomOut=function(){ga>0&&J(ga-1)};var K=function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},L=function(){document.webkitFullscreenElement||document.msFullscreenElement?(za.width=xa.style.width,za.height=xa.style.height,xa.style.width="100%",xa.style.height="100%",u()):(xa.webkitRequestFullscreen||xa.msRequestFullscreen)&&(xa.style.width=za.width,xa.style.height=za.height,u()),S("fullscreen-mode",K())},M=function(){xa.requestFullscreen?xa.requestFullscreen():xa.mozRequestFullScreen?xa.mozRequestFullScreen():xa.webkitRequestFullscreen?xa.webkitRequestFullscreen():xa.msRequestFullscreen&&xa.msRequestFullscreen()},N=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};this.toggleFullscreen=function(){K()?N():M()};var O=function(){ra&&qa.show()},P=function(a){a=a.toString().trim();var b=parseFloat(a.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),c=a.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();c.match(/(pm|per minute)$/)&&(b/=60);var d=0;switch(c){case"rpm":case"rev per minute":case"revolutions per minute":case"rps":case"rev per second":case"revolutions per second":d=2*b*Math.PI;break;case"dpm":case"deg per minute":case"degrees per minute":case"dps":case"deg per second":case"degrees per second":d=b*Math.PI/180;break;case"rad per minute":case"radians per minute":case"rad per second":case"radians per second":d=b;break;default:m_anim=!1}return d*ja/1e3},Q=function(a){a=a.toString().trim();var b=parseFloat(a.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),c=a.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();return"deg"==c&&(b*=Math.PI/180),g(b)},R=function(a){for(var b in a)if("width"==b||"height"==b){var c=a[b].toString().trim(),d=parseFloat(c.replace(/^([0-9]+(?:\.[0-9]*)?).*$/,"$1")),e=c.replace(/^[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();"%"!=e&&(e="px"),ya[b]={css:d+e,unit:e}}};this.addAction=function(a,b){a in Pa||(Pa[a]=[]),Pa[a].push(b)};var S=function(a,b){if(a in Pa&&Pa[a].length)for(var c=0,d=Pa[a].length;d>c;++c)void 0!==b?Pa[a][c](b):Pa[a][c]()};if(void 0===a||void 0===a.panorama||void 0===a.container)return void console.log("PhotoSphereViewer: no value given for panorama or container");var T=void 0!==a.smooth_user_moves?!!a.smooth_user_moves:!0,U=void 0!==a.long_offset?Q(a.long_offset):Math.PI/360,V=void 0!==a.lat_offset?Q(a.lat_offset):Math.PI/180,W=void 0!==a.min_fov?e(parseFloat(a.min_fov),1,179):30,X=void 0!==a.max_fov?e(parseFloat(a.max_fov),1,179):90,Y=void 0!==a.tilt_up_max?e(Q(a.tilt_up_max),0,Math.PI/2):Math.PI/2,Z=void 0!==a.tilt_down_max?-e(Q(a.tilt_down_max),0,Math.PI/2):-Math.PI/2,$=void 0!==a.min_longitude?Q(a.min_longitude):0,_=void 0!==a.max_longitude?Q(a.max_longitude):0,aa=$==_;aa?($=0,_=2*Math.PI):0===_&&(_=2*Math.PI);var ba,ca;_>$?(ba=$,ca=_):(ba=_,ca=$);var da=0,ea=ba;if(void 0!==a.default_position){if(void 0!==a.default_position.lat){var fa=Q(a.default_position.lat);fa>Math.PI&&(fa-=2*Math.PI),da=e(fa,Z,Y)}void 0!==a.default_position["long"]&&(ea=e(Q(a.default_position["long"]),ba,ca))}var ga=0;void 0!==a.zoom_level&&(ga=e(parseInt(Math.round(a.zoom_level)),0,100));var ha=X+ga/100*(W-X),ia=60,ja=1e3/ia,ka=2e3;void 0!==a.time_anim&&(ka="number"==typeof a.time_anim&&a.time_anim>=0?a.time_anim:!1);var la=P(void 0!==a.anim_speed?a.anim_speed:"2rpm"),ma=!0;void 0!==a.reverse_anim&&(ma=!!a.reverse_anim);var na=P(void 0!==a.vertical_anim_speed?a.vertical_anim_speed:"2rpm"),oa=0;if(void 0!==a.vertical_anim_target){var pa=Q(a.vertical_anim_target);pa>Math.PI&&(pa-=2*Math.PI),oa=e(pa,Z,Y)}var qa=new PSVNavBar(this),ra=void 0!==a.navbar?!!a.navbar:!1,sa=void 0!==a.navbar_style?a.navbar_style:{},ta=void 0!==a.allow_user_interactions?!!a.allow_user_interactions:!0;ta||(ra=!1);var ua,va=void 0!==a.allow_scroll_to_zoom?!!a.allow_scroll_to_zoom:!0,wa=void 0!==a.eyes_offset?parseFloat(a.eyes_offset):5,xa="string"==typeof a.container?document.getElementById(a.container):a.container,ya={},za={};void 0!==a.size&&R(a.size);var Aa,Ba,Ca=a.panorama,Da=null,Ea=null,Fa=null,Ga=null,Ha=!1,Ia=0,Ja=0,Ka=!1,La=0,Ma=null,Na=null,Oa=new Sphoords,Pa={},Qa=void 0!==a.usexmpdata?!!a.usexmpdata:!0,Ra=void 0!==a.cors_anonymous?!!a.cors_anonymous:!0,Sa={full_width:null,full_height:null,cropped_width:null,cropped_height:null,cropped_x:null,cropped_y:null};if(void 0!==a.pano_size){for(var Ta in Sa)void 0!==a.pano_size[Ta]&&(Sa[Ta]=parseInt(a.pano_size[Ta]));Qa=!1}var Ua={horizontal_fov:360,vertical_fov:180};if(void 0!==a.captured_view){for(var Ta in Ua)void 0!==a.captured_view[Ta]&&(Ua[Ta]=parseFloat(a.captured_view[Ta]));Qa=!1}var Va=!1,Wa=void 0!==a.loading_msg?a.loading_msg.toString():"Loadingâ€¦",Xa=void 0!==a.loading_img?a.loading_img.toString():null,Ya=void 0!==a.loading_html?a.loading_html:null,Za=null;void 0!==a.overlay&&void 0!==a.overlay.image&&(Za={image:a.overlay.image,position:{x:"left",y:"bottom"}},void 0!==a.overlay.position&&(void 0===a.overlay.position.x||"left"!=a.overlay.position.x&&"right"!=a.overlay.position.x||(Za.position.x=a.overlay.position.x),void 0===a.overlay.position.y||"top"!=a.overlay.position.y&&"bottom"!=a.overlay.position.y||(Za.position.y=a.overlay.position.y)),void 0!==a.overlay.size&&(Za.size={width:void 0!==a.overlay.size.width?a.overlay.size.width:"auto",height:void 0!==a.overlay.size.height?a.overlay.size.height:"auto"})),void 0!==a.onready&&this.addAction("ready",a.onready);var $a=void 0!==a.autoload?!!a.autoload:!0;$a&&this.load()},PSVNavBar=function(a){var b=function(a,b){for(var c=0,d=b.length;d>c;++c)if(b[c]==a)return!0;return!1},c=function(a,c){return b(a,m)&&"string"==typeof c&&("transparent"==c||!!c.match(/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/)||!!c.match(/^rgb\((1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])(,\s*(1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}\)$/)||!!c.match(/^rgba\(((1?[0-9]{1,2}|2[0-4][0-9]|25[0-5]),\s*){3}(0(\.[0-9]*)?|1)\)$/))||b(a,n)&&!isNaN(parseFloat(c))&&isFinite(c)&&c>=0};this.setStyle=function(a){for(var b in a)b in l&&c(b,a[b])&&(l[b]=a[b])},this.create=function(){f=document.createElement("div"),f.style.backgroundColor=l.backgroundColor,f.style.position="absolute",f.style.zIndex=10,f.style.bottom=0,f.style.width="100%",f.style.boxSizing="content-box",f.style.transition="bottom 0.4s ease-out",g=new PSVNavBarButton(a,"autorotate",l),f.appendChild(g.getButton()),h=new PSVNavBarButton(a,"zoom",l),f.appendChild(h.getButton()),i=new PSVNavBarButton(a,"fullscreen",l),f.appendChild(i.getButton()),Sphoords.isDeviceOrientationSupported&&(j=new PSVNavBarButton(a,"orientation",l),f.appendChild(j.getButton()),k=new PSVNavBarButton(a,"virtual-reality",l),f.appendChild(k.getButton()))},this.getBar=function(){return f};var d=function(){o&&(clearTimeout(o),!p&&q&&(o=setTimeout(e,5e3))),p&&(f.style.bottom=0,p=!1,q&&(o=setTimeout(e,5e3)))};this.show=function(){d()};var e=function(){p||(f.style.bottom=-f.offsetHeight+1+"px",p=!0)};this.hide=function(){e()},this.isHidden=function(){return p},this.mustBeHidden=function(a){q=void 0!==a?!!a:!0,q?e():d()};var f,g,h,i,j,k,l={backgroundColor:"rgba(61, 61, 61, 0.5)",buttonsColor:"rgba(255, 255, 255, 0.7)",buttonsBackgroundColor:"transparent",activeButtonsBackgroundColor:"rgba(255, 255, 255, 0.1)",buttonsHeight:20,autorotateThickness:1,zoomRangeWidth:50,zoomRangeThickness:1,zoomRangeDisk:7,fullscreenRatio:4/3,fullscreenThickness:2,gyroscopeThickness:1,virtualRealityRatio:4/3,virtualRealityBorderRadius:2},m=["backgroundColor","buttonsColor","buttonsBackgroundColor","activeButtonsBackgroundColor"],n=["buttonsHeight","autorotateThickness","zoomRangeWidth","zoomRangeThickness","zoomRangeDisk","fullscreenRatio","fullscreenThickness"],o=null,p=!1,q=!1},PSVNavBarButton=function(a,b,c){var d=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},e=function(){switch(b){case"autorotate":var e=c.buttonsHeight-2*c.autorotateThickness,n=e/10;i=document.createElement("div"),i.style.cssFloat="left",i.style.boxSizing="inherit",i.style.padding="10px",i.style.width=c.buttonsHeight+"px",i.style.height=c.buttonsHeight+"px",i.style.backgroundColor=c.buttonsBackgroundColor,i.style.position="relative",i.style.cursor="pointer",d(i,"click",function(){a.toggleAutorotate()});var r=document.createElement("div");r.style.boxSizing="inherit",r.style.width=e+"px",r.style.height=e+"px",r.style.borderRadius="50%",r.style.border=c.autorotateThickness+"px solid "+c.buttonsColor,i.appendChild(r);var s=document.createElement("div");s.style.boxSizing="inherit",s.style.width=e+"px",s.style.height=n+"px",s.style.borderRadius="50%",s.style.border=c.autorotateThickness+"px solid "+c.buttonsColor,s.style.position="absolute",s.style.top="50%",s.style.marginTop=-(n/2+c.autorotateThickness)+"px",i.appendChild(s),a.addAction("autorotate",j);break;case"zoom":i=document.createElement("div"),i.style.cssFloat="left",i.style.boxSizing="inherit";var t=document.createElement("div");t.style.cssFloat="left",t.style.boxSizing="inherit",t.style.padding="10px",t.style.height=c.buttonsHeight+"px",t.style.backgroundColor=c.buttonsBackgroundColor,t.style.lineHeight=c.buttonsHeight+"px",t.style.color=c.buttonsColor,t.style.cursor="pointer",t.textContent="-",d(t,"click",function(){a.zoomOut()}),i.appendChild(t),f=document.createElement("div"),f.style.cssFloat="left",f.style.boxSizing="inherit",f.style.padding=10+(c.buttonsHeight-c.zoomRangeThickness)/2+"px 5px",f.style.backgroundColor=c.buttonsBackgroundColor,f.style.cursor="pointer",i.appendChild(f),g=document.createElement("div"),g.style.boxSizing="inherit",g.style.width=c.zoomRangeWidth+"px",g.style.height=c.zoomRangeThickness+"px",g.style.backgroundColor=c.buttonsColor,g.style.position="relative",f.appendChild(g),h=document.createElement("div"),h.style.position="absolute",h.style.top=(c.zoomRangeThickness-c.zoomRangeDisk)/2+"px",h.style.left=-(c.zoomRangeDisk/2)+"px",h.style.boxSizing="inherit",h.style.width=c.zoomRangeDisk+"px",h.style.height=c.zoomRangeDisk+"px",h.style.borderRadius="50%",h.style.backgroundColor=c.buttonsColor,a.addAction("zoom-updated",k),d(f,"mousedown",l),d(f,"touchstart",m),d(document,"mousemove",p),d(document,"touchmove",q),d(document,"mouseup",o),d(document,"touchend",o),g.appendChild(h);var u=document.createElement("div");u.style.cssFloat="left",u.style.boxSizing="inherit",u.style.padding="10px",u.style.height=c.buttonsHeight+"px",u.style.backgroundColor=c.buttonsBackgroundColor,u.style.lineHeight=c.buttonsHeight+"px",u.style.color=c.buttonsColor,u.style.cursor="pointer",u.textContent="+",d(u,"click",function(){a.zoomIn()}),i.appendChild(u);break;case"fullscreen":var v=c.buttonsHeight*c.fullscreenRatio,w=.3*c.buttonsHeight,x=(c.buttonsHeight-w)/2,y=.3*v,z=(v-y)/2-c.fullscreenThickness,A=c.buttonsHeight-2*c.fullscreenThickness;i=document.createElement("div"),i.style.cssFloat="right",i.style.boxSizing="inherit",i.style.padding="10px",i.style.width=v+"px",i.style.height=c.buttonsHeight+"px",i.style.backgroundColor=c.buttonsBackgroundColor,i.style.cursor="pointer",d(i,"click",function(){a.toggleFullscreen()});var B=document.createElement("div");B.style.cssFloat="left",B.style.boxSizing="inherit",B.style.width=c.fullscreenThickness+"px",B.style.height=w+"px",B.style.borderStyle="solid",B.style.borderColor=c.buttonsColor+" transparent",B.style.borderWidth=x+"px 0",i.appendChild(B);var C=document.createElement("div");C.style.cssFloat="left",C.style.boxSizing="inherit",C.style.width=z+"px",C.style.height=A+"px",C.style.borderStyle="solid",C.style.borderColor=c.buttonsColor+" transparent",C.style.borderWidth=c.fullscreenThickness+"px 0",i.appendChild(C);var D=document.createElement("div");D.style.cssFloat="left",D.style.boxSizing="inherit",D.style.marginLeft=y+"px",D.style.width=z+"px",D.style.height=A+"px",D.style.borderStyle="solid",D.style.borderColor=c.buttonsColor+" transparent",D.style.borderWidth=c.fullscreenThickness+"px 0",i.appendChild(D);var E=document.createElement("div");E.style.cssFloat="left",E.style.boxSizing="inherit",E.style.width=c.fullscreenThickness+"px",E.style.height=w+"px",E.style.borderStyle="solid",E.style.borderColor=c.buttonsColor+" transparent",E.style.borderWidth=x+"px 0",i.appendChild(E);var F=document.createElement("div");F.style.clear="left",i.appendChild(F),a.addAction("fullscreen-mode",j);break;case"orientation":var G=c.buttonsHeight-2*c.gyroscopeThickness,H=G-4*c.gyroscopeThickness,I=G/10;i=document.createElement("div"),i.style.cssFloat="right",i.style.boxSizing="inherit",i.style.padding="10px",i.style.width=c.buttonsHeight+"px",i.style.height=c.buttonsHeight+"px",i.style.backgroundColor=c.buttonsBackgroundColor,i.style.position="relative",i.style.cursor="pointer",d(i,"click",function(){a.toggleDeviceOrientation()});var J=document.createElement("div");J.style.boxSizing="inherit",J.style.width=G+"px",J.style.height=G+"px",J.style.borderRadius="50%",J.style.border=c.gyroscopeThickness+"px solid "+c.buttonsColor,i.appendChild(J);var K=document.createElement("div");K.style.boxSizing="inherit",K.style.width=H+"px",K.style.height=I+"px",K.style.borderRadius="50%",K.style.border=c.gyroscopeThickness+"px solid "+c.buttonsColor,K.style.position="absolute",K.style.top="50%",K.style.left="50%",K.style.marginTop=-(I/2+c.gyroscopeThickness)+"px",K.style.marginLeft=-(H/2+c.gyroscopeThickness)+"px",i.appendChild(K);var L=document.createElement("div");L.style.boxSizing="inherit",L.style.width=I+"px",L.style.height=H+"px",L.style.borderRadius="50%",L.style.border=c.gyroscopeThickness+"px solid "+c.buttonsColor,L.style.position="absolute",L.style.top="50%",L.style.left="50%",L.style.marginTop=-(H/2+c.gyroscopeThickness)+"px",L.style.marginLeft=-(I/2+c.gyroscopeThickness)+"px",i.appendChild(L),a.addAction("device-orientation",j);break;case"virtual-reality":var M=c.buttonsHeight*c.virtualRealityRatio,N=M/4,O=N/2;i=document.createElement("div"),i.style.cssFloat="right",i.style.position="relative",i.style.boxSizing="inherit",i.style.padding="10px",i.style.width=M+"px",i.style.height=c.buttonsHeight+"px",i.style.backgroundColor=c.buttonsBackgroundColor,i.style.cursor="pointer",d(i,"click",function(){a.toggleStereo()});var P=document.createElement("div");P.style.boxSizing="inherit",P.style.width=M+"px",P.style.height=c.buttonsHeight+"px",P.style.borderRadius=c.virtualRealityBorderRadius+"px",P.style.backgroundColor=c.buttonsColor,i.appendChild(P);var Q=document.createElement("div");Q.style.boxSizing="inherit",Q.style.width=N+"px",Q.style.height=N+"px",Q.style.position="absolute",Q.style.top=O+10+"px",Q.style.left=O+10+"px",Q.style.borderRadius="50%",Q.style.backgroundColor=c.backgroundColor,i.appendChild(Q);var R=document.createElement("div");R.style.boxSizing="inherit",R.style.width=N+"px",R.style.height=N+"px",R.style.position="absolute",R.style.top=O+10+"px",R.style.right=O+10+"px",R.style.borderRadius="50%",R.style.backgroundColor=c.backgroundColor,i.appendChild(R);var S=document.createElement("div");S.style.boxSizing="inherit",S.style.width=N+"px",S.style.height=c.buttonsHeight/2+"px",S.style.position="absolute",S.style.left="50%",S.style.bottom="10px",S.style.marginLeft=-(N/2)+"px",S.style.borderTopLeftRadius="50% 60%",S.style.borderTopRightRadius="50% 60%",S.style.backgroundColor=c.backgroundColor,i.appendChild(S),a.addAction("stereo-effect",j)}};this.getButton=function(){return i};var f,g,h,i,j=function(a){a?i.style.backgroundColor=c.activeButtonsBackgroundColor:i.style.backgroundColor=c.buttonsBackgroundColor},k=function(a){h.style.left=a/100*c.zoomRangeWidth-c.zoomRangeDisk/2+"px"},l=function(a){n(parseInt(a.clientX))},m=function(a){var b=a.touches[0];b.target!=f&&b.target!=g&&b.target!=h||n(parseInt(b.clientX))},n=function(a){s=!0,r(a)},o=function(a){s=!1},p=function(a){a.preventDefault(),r(parseInt(a.clientX))},q=function(a){var b=a.touches[0];b.target!=f&&b.target!=g&&b.target!=h||(a.preventDefault(),r(parseInt(b.clientX)))},r=function(b){if(s){var d=b-g.getBoundingClientRect().left,e=d/c.zoomRangeWidth*100;a.zoom(e)}},s=!1;e()},Sphoords=function(){var a=function(){var a=navigator.userAgent;return/Gecko\/[0-9.]+/.test(a)?"Gecko":/Chrome\/[0-9.]+/.test(a)?"Blink":/AppleWebKit\/[0-9.]+/.test(a)?"WebKit":/Trident\/[0-9.]+/.test(a)?"Trident":/Opera\/[0-9.]+/.test(a)?"Presto":"Gecko"},b=function(a){return a-360*Math.floor(a/360)};this.start=function(){return Sphoords.isDeviceOrientationSupported?(window.addEventListener("deviceorientation",c,!1),e=!0,!0):(console.log("Device Orientation API not supported"),!1)},this.stop=function(){e&&(window.removeEventListener("deviceorientation",c,!1),e=!1)},this.toggle=function(){e?this.stop():this.start()},this.isEventAttached=function(){return e};var c=function(a){k=Sphoords.getScreenOrientation();var c=0,e=0;switch(k){case"portrait-primary":c=a.alpha+a.gamma,e=a.beta-90;break;case"landscape-primary":if(c=a.alpha+a.beta-90,e=-a.gamma-90,Math.abs(a.beta)>90)switch(l){case"Blink":e+=180;break;case"Gecko":default:e=-e}break;case"landscape-secondary":if(c=a.alpha-a.beta+90,e=a.gamma-90,Math.abs(a.beta)>90)switch(l){case"Blink":e+=180;break;case"Gecko":default:e=-e}break;case"portrait-secondary":c=a.alpha-a.gamma,e=180-(a.beta-90),e=270-a.beta}e=b(e),e>=180&&(e-=360),f=b(c),g=Math.max(-90,Math.min(90,e)),h=f*j,i=g*j,d()};this.getCoordinates=function(){return{longitude:h,latitude:i}},this.getCoordinatesInDegrees=function(){return{longitude:f,latitude:g}},this.getScreenOrientation=function(){return k},this.addListener=function(a){m.push(a)};var d=function(){if(m.length)for(var a=0,b=m.length;b>a;++a)m[a]({longitude:h,latitude:i})},e=!1,f=0,g=0,h=0,i=0,j=Math.PI/180,k=Sphoords.getScreenOrientation(),l=a(),m=[]};Sphoords.getScreenOrientation=function(){var a=null;return screen.orientation?a=screen.orientation:screen.mozOrientation?a=screen.mozOrientation:screen.msOrientation&&(a=screen.msOrientation),null!==a&&"object"==typeof a?a.type:a},Sphoords.isDeviceOrientationSupported=!1,function(){function a(b){null!==b&&null!==b.alpha&&(Sphoords.isDeviceOrientationSupported=!0,window.removeEventListener("deviceorientation",a))}window.DeviceOrientationEvent&&null!==Sphoords.getScreenOrientation()&&window.addEventListener("deviceorientation",a)}();
//# sourceMappingURL=photo-sphere-viewer.js.map